<% if article.featured?%>
  <div class='panel panel-primary'>
<% else %>
  <div class='panel panel-default'>
<% end %>

  <div class='panel-heading'>

    <h3 class='panel-title'>

      <%= link_to article.title.html_safe,
                  article %>

      <% if article.featured?%>
        <%= link_to article.category.name,
                    article.category,
                    class: 'label label-danger
                            article-tag
                            clear' %>
      <% else %>
        <span class='label label-default clear article-tag'>
        <%= link_to article.category.name,
                    article.category %>
        </span>
      <% end %>

    </h3>

  </div>

  <div class='panel-body'>

    <p class='row'><%= article.body.html_safe %></p>

    <div>
      <%= link_to gravatar_for(article.user, size: 50), article.user %>

      <span class='user'>
      <% if article.user.admin? %>
        <%= link_to article.user.name,
                    article.user,
                    class: 'admin-user' %>
      <% else %>
        <% if article.user.mod? %>
          <%= link_to article.user.name,
                      article.user,
                      class: 'mod-user' %>
        <% else %>
          <%= link_to article.user.name,
                      article.user %>
        <% end %>
      <% end %>
      </span>

    </div>

    <span class='article-time'>
      <li>Created: <%= article.created_at %></li>
      <li>Updated: <%= article.updated_at %></li>
    </span>

    <% if logged_in? && (current_user.admin? || current_user.mod? || current_user?(article.user)) %>

      <div class='article-buttons'>

        <% if article.approved? && !current_user.admin? && !current_user.mod? %>
          <span class='glyphicon glyphicon-eye-open btn-sm'></span>
        <% end %>

        <% if article.featured? && !current_user.admin? && !current_user.mod? %>
          <span class='glyphicon glyphicon-star btn-sm'></span>
        <% end %>

        <% if current_user.admin? || current_user.mod? %>
          <% if article.approved? %>
            <%= link_to '',
                        approve_article_path(article),
                        method: :post,
                        data: { confirm: 'Unapprove this article?'},
                        class: 'btn btn-sm btn-primary
                                glyphicon glyphicon-eye-open' %>
            <% else %>
            <%= link_to '',
                        approve_article_path(article),
                        method: :post,
                        data: { confirm: 'Approve this article?'},
                        class: 'btn btn-sm btn-default
                                glyphicon glyphicon-eye-close' %>
            <% end %>
        <% end %>

        <% if current_user.admin? || current_user.mod? %>
          <% if article.featured? %>
            <%= link_to '',
                        feature_article_path(article),
                        method: :post,
                        data: { confirm: 'Unfeature this article?'},
                        class: 'btn btn-sm btn-primary
                                glyphicon glyphicon-star' %>
            <% else %>
            <%= link_to '',
                        feature_article_path(article),
                        method: :post,
                        data: { confirm: 'Feature this article?'},
                        class: 'btn btn-sm btn-default
                                glyphicon glyphicon-star-empty' %>
            <% end %>
        <% end %>

        <%= link_to '',
                    edit_article_path(article),
                    class: 'btn btn-sm btn-warning
                            glyphicon glyphicon-pencil' %>

        <%= link_to '',
                     article,
                     method: :delete,
                     data: { confirm: 'Delete this article?' },
                     class: 'btn btn-sm btn-danger
                             glyphicon glyphicon-remove'%>
      </div>

    <% end %>

  </div>

</div>
